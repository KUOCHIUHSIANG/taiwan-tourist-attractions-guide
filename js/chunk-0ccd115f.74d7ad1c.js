(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ccd115f"],{a680:function(t,a,e){"use strict";e("f273")},ad68:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"restaurant-container"},[a("SharedPage",{attrs:{"initial-inside-page-data":t.restaurant,center:{lat:t.lat,lng:t.lng}}}),0!==t.nearbyRestaurants.length?a("SharedCardsList",{attrs:{"initial-card-list":t.nearbyRestaurants,"initial-title":t.nearByTitle,"initial-sub-title":t.nearBySubTitle}}):t._e()],1)},i=[],n=(e("14d9"),e("c8fe")),r=e("0204"),u=e("954e"),o=e("ac0d"),c=e("4360"),h={mixins:[o["b"]],components:{SharedPage:n["a"],SharedCardsList:r["a"]},created(){this.fetchRestaurant(this.$route.params.RestaurantID)},data(){return{restaurant:{},nearbyRestaurants:[],lat:0,lng:0}},methods:{async fetchRestaurant(t){try{const a=await u["a"].getRestaurant({id:t});if(0===a.data.length)return this.$toast.error("此餐廳不存在",{timeout:1500}),void this.$router.push({name:"search-restaurant"});const[e]=a.data;this.restaurant={id:e.RestaurantID,name:e.RestaurantName,description:e.Description,phone:e.Phone,address:e.Address?e.Address:"未提供",openTime:e.OpenTime,city:e.City?e.City:"未提供",class1:e.Class,websiteUrl:e.WebsiteUrl,picture:e.Picture,position:e.Position},this.lat=this.restaurant.position.PositionLat,this.lng=this.restaurant.position.PositionLon,this.fetchNearbyRestaurants(this.restaurant.id,this.lat,this.lng)}catch(a){401===a.response.status?(c["a"].dispatch("getToken"),this.fetchRestaurant(this.$route.params.ActivityID)):console.log(a)}},async fetchNearbyRestaurants(t,a,e){try{const s=4,i=await u["a"].getNearbyRestaurants(t,a,e,s);this.nearbyRestaurants=i.data.map(t=>({id:t.RestaurantID,name:t.RestaurantName,city:t.City?t.City:"未提供",picture:t.Picture})),this.nearbyRestaurants=this.nearbyRestaurants.filter(t=>t.id!==this.restaurant.id)}catch(s){401===s.response.status?(c["a"].dispatch("getToken"),this.fetchRestaurant(this.$route.params.RestaurantID)):console.log(s)}}},watch:{scenicSpot(){this.getDimensions()}},beforeRouteUpdate(t,a,e){const{RestaurantID:s}=t.params;this.fetchRestaurant(s),e()}},d=h,l=(e("a680"),e("2877")),p=Object(l["a"])(d,s,i,!1,null,"f5be4f8a",null);a["default"]=p.exports},f273:function(t,a,e){}}]);
//# sourceMappingURL=chunk-0ccd115f.74d7ad1c.js.map